# 为什么要微服务
```
1 解耦；
  1.1大型项目有很多不同的业务组,这些业务代码如果写在同一个git仓库是灾难.
  1.2包括不限于技术栈、开发、运维、数据库等，就是每个服务这些都是独立的，彼此之间不会相互影响
2 水平扩展；微服务最适合水平扩展以提高整个系统的性能
```
# 如何搭建微服务
```
1 选择一个微服务框架
2 做好服务治理预案
  2.1 用k8s做负载均衡，k8s etcd做注册中心，k8s configmap做配置中心
  2.2 k8s+istio
```
# 限流
```
为什么要限流
防止流量打垮业务系统
限流是什么
被调用方保护自己的方式,当流量大到一定程度就拒绝服务

如何限流
  1 固定窗口计数器(不推荐)
  举例:每分钟限制1000；这种方式的缺点是不能很好的限制,比如第一分钟最后10s有1000访问,第二分钟前10s有1000访问,这种情况计数器是给过的,但是20s内却突破了1000这个限制

  2 滑动时间窗口
  一分钟作为一个大窗口,分出6个小窗口,每10s向前滑动一个小窗口.这种方式解决了上述的问题

  3 漏桶(流量绝对均匀,不适用有突增流量场景)
  固定大小的队列,每个请求放入固定大小的队列进行存储.队列以固定的速率允许请求,如果队列满了就会拒绝随后要加入的请求.
  4 令牌桶(适用于有突增流量的场景)
  生产者消费者模型,生产者按一定速度生产令牌放到桶里,消费者指请求.每个请求过来都得拿令牌才能访问

如何确定限流阈值
  1 经验
  2 压测
  3 手动慢慢调整
```